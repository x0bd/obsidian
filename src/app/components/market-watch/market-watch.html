<!-- MARKET WATCH -->
<div class="obs-panel" role="region" aria-label="Market watch">
  <div class="obs-panel-header">
    <span class="obs-panel-title">Markets</span>
  </div>

  <ul class="obs-mw-list" role="listbox" aria-label="Select instrument">
    @for (inst of svc.instruments(); track inst.symbol) {
      <li
        class="obs-mw-row"
        role="option"
        [attr.aria-selected]="svc.activeSymbol() === inst.symbol"
        [class.obs-mw-row--active]="svc.activeSymbol() === inst.symbol"
        (click)="select(inst)"
        (keydown.enter)="select(inst)"
        (keydown.space)="select(inst)"
        tabindex="0"
      >
        <div class="obs-mw-row__left">
          <span class="obs-mw-row__sym">{{ inst.symbol.replace('-PERP', '') }}</span>
          <span class="obs-mw-row__name">Perpetual</span>
        </div>
        <div class="obs-mw-row__right">
          <span class="num-sm">{{ inst.price | number: '1.2-4' }}</span>
          <span class="badge" [class.badge--pos]="inst.changePct >= 0" [class.badge--neg]="inst.changePct < 0">
            {{ formatPct(inst.changePct) }}
          </span>
        </div>
      </li>
    }
  </ul>

  <div class="obs-mw-footer" aria-live="polite">
    <span class="obs-mw-alert">Whale Alert â€” 500 BTC moved</span>
  </div>
</div>