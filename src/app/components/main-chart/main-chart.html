<!-- MAIN CHART -->
<div
  class="obs-panel obs-main-chart"
  role="region"
  [attr.aria-label]="svc.activeSymbol() + ' chart'"
>
  <div class="obs-panel-header">
    <div style="display: flex; align-items: baseline; gap: 12px">
      <span style="font-size: 0.82rem; font-weight: 600; color: var(--text-1)">{{
        svc.activeSymbol()
      }}</span>
      <span class="obs-panel-title">1H</span>
    </div>
    <div class="obs-ohlc" aria-label="OHLC data">
      <div class="obs-ohlc-item">
        <span class="label">O</span>
        <span class="num-sm">{{ ohlc().o }}</span>
      </div>
      <div class="obs-ohlc-item">
        <span class="label">H</span>
        <span class="num-sm" style="color: var(--positive)">{{ ohlc().h }}</span>
      </div>
      <div class="obs-ohlc-item">
        <span class="label">L</span>
        <span class="num-sm" style="color: var(--negative)">{{ ohlc().l }}</span>
      </div>
      <div class="obs-ohlc-item">
        <span class="label">C</span>
        <span class="num-sm">{{ ohlc().c }}</span>
      </div>
    </div>
  </div>

  <div class="obs-chart-body" aria-hidden="true">
    <div class="obs-candles">
      @for (c of candles(); track $index) {
        <div
          class="obs-candle"
          [class.obs-candle--bull]="c.type === 'bull'"
          [class.obs-candle--bear]="c.type === 'bear'"
          [style.height.%]="c.heightPct"
          [style.margin-bottom.%]="c.bottomPct"
        >
          <div class="obs-candle__wick"></div>
        </div>
      }
    </div>
  </div>

  <div class="obs-chart-actions">
    <button class="obs-btn obs-btn--buy" (click)="buy()" aria-label="Buy market order">
      Buy Market
    </button>
    <button class="obs-btn obs-btn--sell" (click)="sell()" aria-label="Sell market order">
      Sell Market
    </button>
    <div class="obs-chart-timeframes" aria-label="Timeframes">
      @for (tf of ['1m', '5m', '15m', '1H', '4H', '1D']; track tf) {
        <button class="obs-tf-btn" [class.obs-tf-btn--active]="tf === '1H'">{{ tf }}</button>
      }
    </div>
  </div>
</div>
