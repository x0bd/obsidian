<!-- TOP BAR -->
<header class="obs-top-bar" role="banner">
  <div class="obs-top-bar__logo" aria-label="Obsidian OS">OBSIDIAN<span>.OS</span></div>

  <nav class="obs-top-bar__ticker" aria-label="Live market prices">
    @for (inst of svc.instruments(); track inst.symbol) {
      <div class="obs-ticker-item">
        <span class="obs-ticker-item__sym">{{ baseSymbol(inst.symbol) }}</span>
        <span
          class="obs-ticker-item__price"
          [style.color]="inst.changePct >= 0 ? 'var(--positive)' : 'var(--negative)'"
          >{{ inst.price | number: '1.2-4' }}</span
        >
        <span
          class="badge"
          [class.badge--pos]="inst.changePct >= 0"
          [class.badge--neg]="inst.changePct < 0"
        >
          {{ inst.changePct >= 0 ? '+' : '' }}{{ inst.changePct.toFixed(2) }}%
        </span>
      </div>
    }
  </nav>

  <div class="obs-top-bar__meta" aria-label="System status">
    <span class="obs-top-bar__latency">4ms</span>
    <button
      class="obs-mode-btn"
      (click)="toggleTheme()"
      [attr.aria-label]="isLight() ? 'Switch to dark mode' : 'Switch to light mode'"
    >
      {{ isLight() ? 'Dark' : 'Light' }}
    </button>
    <div
      class="obs-status-dot"
      role="status"
      aria-label="Feed connected"
      title="Feed connected"
    ></div>
  </div>
</header>
